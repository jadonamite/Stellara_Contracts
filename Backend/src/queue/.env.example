# Queue Configuration Example
# Copy this to your .env file and adjust values as needed

# ============================================================================
# REDIS CONFIGURATION (for BullMQ queues)
# ============================================================================

# Method 1: Individual Redis connection parameters
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_QUEUE_DB=1

# Method 2: Redis connection URL (alternative)
# REDIS_URL=redis://:password@localhost:6379/1

# ============================================================================
# QUEUE CONFIGURATION
# ============================================================================

# Max number of concurrent jobs per queue type
# Adjust based on your server capacity
QUEUE_DEPLOY_CONTRACT_CONCURRENCY=2
QUEUE_PROCESS_TTS_CONCURRENCY=4
QUEUE_INDEX_MARKET_NEWS_CONCURRENCY=3

# ============================================================================
# JOB DEFAULTS
# ============================================================================

# Default number of retry attempts for failed jobs
QUEUE_DEFAULT_ATTEMPTS=3

# Default backoff delay in milliseconds (for exponential backoff)
QUEUE_DEFAULT_BACKOFF_DELAY=2000

# Keep completed jobs in queue for history (hours)
# 0 = remove immediately, -1 = keep forever
QUEUE_KEEP_COMPLETED_JOBS=24

# Keep failed jobs in queue for analysis (hours)
# 0 = remove immediately, -1 = keep forever
QUEUE_KEEP_FAILED_JOBS=7

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Enable detailed queue logging
QUEUE_DEBUG_LOGGING=false

# Enable queue event tracking
QUEUE_EVENT_TRACKING=true

# DLQ retention days (items older than this will be auto-purged)
QUEUE_DLQ_RETENTION_DAYS=30

# ============================================================================
# ENVIRONMENT-SPECIFIC EXAMPLES
# ============================================================================

# DEVELOPMENT
# NODE_ENV=development
# REDIS_HOST=localhost
# REDIS_QUEUE_DB=1
# QUEUE_DEFAULT_ATTEMPTS=3
# QUEUE_DEBUG_LOGGING=true

# STAGING
# NODE_ENV=staging
# REDIS_HOST=redis-staging.example.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-staging-password
# REDIS_QUEUE_DB=1
# QUEUE_DEFAULT_ATTEMPTS=3
# QUEUE_DEBUG_LOGGING=false

# PRODUCTION
# NODE_ENV=production
# REDIS_HOST=redis-prod.example.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-production-password
# REDIS_QUEUE_DB=1
# QUEUE_DEPLOY_CONTRACT_CONCURRENCY=4
# QUEUE_PROCESS_TTS_CONCURRENCY=6
# QUEUE_INDEX_MARKET_NEWS_CONCURRENCY=5
# QUEUE_DEFAULT_ATTEMPTS=5
# QUEUE_DEBUG_LOGGING=false
# QUEUE_KEEP_FAILED_JOBS=30
